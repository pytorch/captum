<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Captum · Model Interpretability for PyTorch</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Model Interpretability for PyTorch"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Captum · Model Interpretability for PyTorch"/><meta property="og:type" content="website"/><meta property="og:url" content="https://captum.ai/"/><meta property="og:description" content="Model Interpretability for PyTorch"/><meta property="og:image" content="https://captum.ai/img/captum-icon.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://captum.ai/img/captum.png"/><link rel="shortcut icon" href="/img/captum.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-139570076-2', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/code_block_buttons.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/code_block_buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/mathjax.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/captum_logo.svg" alt="Captum"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/introduction" target="_self">Docs</a></li><li class=""><a href="/tutorials/" target="_self">Tutorials</a></li><li class=""><a href="/api/" target="_self">API Reference</a></li><li class=""><a href="https://github.com/pytorch/captum" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div>
<script type="text/javascript" id="documentation_options" data-url_root="./"
  src="/js/documentation_options.js"></script>
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/underscore.js"></script>
<script type="text/javascript" src="/js/doctools.js"></script>
<script type="text/javascript" src="/js/language_data.js"></script>
<script type="text/javascript" src="/js/searchtools.js"></script>
<div class="sphinx"><div class="document">
<div class="documentwrapper">
<div class="bodywrapper">
<div class="body" role="main">
<div class="section" id="module-captum.attr._models.pytext">
<span id="captum-models"></span><h1>Captum.Models<a class="headerlink" href="#module-captum.attr._models.pytext" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="captum.attr._models.pytext.PyTextInterpretableEmbedding">
<em class="property">class </em><code class="sig-prename descclassname">captum.attr._models.pytext.</code><code class="sig-name descname">PyTextInterpretableEmbedding</code><span class="sig-paren">(</span><em class="sig-param">embeddings</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/captum/attr/_models/pytext.html#PyTextInterpretableEmbedding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#captum.attr._models.pytext.PyTextInterpretableEmbedding" title="Permalink to this definition">¶</a></dt>
<dd><p>In PyText DocNN models we need a way to access word embedding layers,
generate the embeddings and subtract the baseline.
To do so, we separate embedding layers from the model, compute the embeddings
separately and do all operations needed outside of the model.
The original embedding layer is being replaced by <cite>PyTextInterpretableEmbedding</cite>
layer which passes precomputed embedding vectors to lower layers.</p>
<p>Initializes internal Module state, shared by both nn.Module and ScriptModule.</p>
<dl class="method">
<dt id="captum.attr._models.pytext.PyTextInterpretableEmbedding.forward">
<code class="sig-name descname">forward</code><span class="sig-paren">(</span><em class="sig-param">input</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/captum/attr/_models/pytext.html#PyTextInterpretableEmbedding.forward"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#captum.attr._models.pytext.PyTextInterpretableEmbedding.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>The forward pass of embedding layer. This can be for the text or any
type of embedding.</p>
<p>Args</p>
<blockquote>
<div><p>input: Input embeddings tensor</p>
</div></blockquote>
<p>Return</p>
<blockquote>
<div><dl class="simple">
<dt>output: Output tensor is the same as input. It passes through</dt><dd><p>the embedding tensors to lower layers without any
modifications</p>
</dd>
</dl>
</div></blockquote>
</dd></dl>
<dl class="method">
<dt id="captum.attr._models.pytext.PyTextInterpretableEmbedding.get_attribution_map">
<code class="sig-name descname">get_attribution_map</code><span class="sig-paren">(</span><em class="sig-param">attributions</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/captum/attr/_models/pytext.html#PyTextInterpretableEmbedding.get_attribution_map"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#captum.attr._models.pytext.PyTextInterpretableEmbedding.get_attribution_map" title="Permalink to this definition">¶</a></dt>
<dd><p>After attribution scores are computed for an input embedding vector
we need to split it up into attribution sub tensors for each
feature type: word, dict and other types</p>
<p>TODO: we can potentally also output tuples of attributions. This might be
a better option. We’ll work on this in a separate diff.</p>
<p>Args</p>
<blockquote>
<div><dl class="simple">
<dt>attributions: A tensor that contains attribution values for each input</dt><dd><p>field. It usually has the same dimensions as the input
tensor</p>
</dd>
</dl>
</div></blockquote>
<p>Return</p>
<blockquote>
<div><p>attribution_map: A dictionary of feature_type and attribution values</p>
</div></blockquote>
</dd></dl>
</dd></dl>
<dl class="class">
<dt id="captum.attr._models.pytext.BaselineGenerator">
<em class="property">class </em><code class="sig-prename descclassname">captum.attr._models.pytext.</code><code class="sig-name descname">BaselineGenerator</code><span class="sig-paren">(</span><em class="sig-param">model</em>, <em class="sig-param">data_handler</em>, <em class="sig-param">device</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/captum/attr/_models/pytext.html#BaselineGenerator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#captum.attr._models.pytext.BaselineGenerator" title="Permalink to this definition">¶</a></dt>
<dd><p>This is an example input baseline generator for DocNN model which uses
word and dict features.</p>
<dl class="method">
<dt id="captum.attr._models.pytext.BaselineGenerator.generate_baseline">
<code class="sig-name descname">generate_baseline</code><span class="sig-paren">(</span><em class="sig-param">integ_grads_embeddings</em>, <em class="sig-param">seq_length</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/captum/attr/_models/pytext.html#BaselineGenerator.generate_baseline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#captum.attr._models.pytext.BaselineGenerator.generate_baseline" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates baseline for input word and dict features. In the future we
will extend it to support char and other features as well.
This baseline is entirely based on the <cite>&lt;pad&gt;</cite> token.</p>
<p>Args</p>
<blockquote>
<div><dl class="simple">
<dt>integ_grads_embeddings: A reference to integrated gradients embedding</dt><dd><p>layer</p>
</dd>
</dl>
<p>seq_length: The length of each sequence which depends on batch size</p>
</div></blockquote>
<dl class="simple">
<dt>Return</dt><dd><dl class="simple">
<dt>baseline: A tuple of feature baselines</dt><dd><p>Each feature type has a corresponding baseline tensor
in the tuple.
Currently only Dict and Word feature types are supported</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>
</dd></dl>
</div>
</div>
</div>
</div>
<div aria-label="main navigation" class="sphinxsidebar" role="navigation">
<div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Captum</a></h1>
<h3>Navigation</h3>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="attribution.html">Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="noise_tunnel.html">NoiseTunnel</a></li>
<li class="toctree-l1"><a class="reference internal" href="layer.html">Layer Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="neuron.html">Neuron Attribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_classes.html">Base Classes</a></li>
</ul>
<p class="caption"><span class="caption-text">Insights API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="insights.html">Insights</a></li>
<li class="toctree-l1"><a class="reference internal" href="insights.html#features">Features</a></li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
<li><a href="index.html">Documentation overview</a><ul>
</ul></li>
</ul>
</div>
<div id="searchbox" role="search" style="display: none">
<h3 id="searchlabel">Quick search</h3>
<div class="searchformwrapper">
<form action="search.html" class="search" method="get">
<input aria-labelledby="searchlabel" name="q" type="text"/>
<input type="submit" value="Go"/>
</form>
</div>
</div>
<script>$('#searchbox').show(0);</script>
</div>
</div>
<div class="clearer"></div>
</div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footerSection"><h5>Docs</h5><a href="/docs/introduction">Introduction</a><a href="/docs/getting_started">Getting Started</a><a href="/tutorials/">Tutorials</a><a href="/api/">API Reference</a></div><div class="footerSection"><h5>Social</h5><div class="social"><a class="github-button" href="https://github.com/pytorch/captum" data-count-href="https://github.com/pytorch/captum/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star Captum on GitHub">captum</a></div></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright"> Copyright © 2020 Facebook Inc.</section><script>
            (function() {
              var BAD_BASE = '/captum/';
              if (window.location.origin !== 'https://captum.ai') {
                var pathname = window.location.pathname;
                var newPathname = pathname.slice(pathname.indexOf(BAD_BASE) === 0 ? BAD_BASE.length : 1);
                var newLocation = 'https://captum.ai/' + newPathname;
                console.log('redirecting to ' + newLocation);
                window.location.href = newLocation;
              }
            })();
          </script></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '207c27d819f967749142d8611de7cb19',
                indexName: 'captum',
                inputSelector: '#search_input_react'
              });
            </script></body></html>